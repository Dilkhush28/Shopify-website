;/*FB_PKG_DELIM*/

__d("MWPThreadHasActiveUserUtils",["I64","ServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){return a!=null?(h||(h=d("I64"))).to_float(a)+h.to_float(b)>=d("ServerTime").getMillis():!1}function a(a){return(h||(h=d("I64"))).to_float(a)>d("ServerTime").getMillis()}function b(a){return i(a,(h||(h=d("I64"))).of_string("86400000"))}g.isMsTimestampNotExpired=a;g.isMsTimestampWithinPastDay=b}),98);
__d("IGDPresenceTextForCanonicalThread",["fbt","CometRelativeTimestamp.react","I64","LSIntEnum","LSPresenceStatus","MWPThreadHasActiveUserUtils","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react");function m(a){var b=(a==null?void 0:a.expirationTimestampMs)?!d("MWPThreadHasActiveUserUtils").isMsTimestampNotExpired(a==null?void 0:a.expirationTimestampMs):!0;if(b)return{state:"inactive"};b=a!=null?(j||(j=d("I64"))).equal(a.status,(k||(k=d("LSIntEnum"))).ofNumber(c("LSPresenceStatus").ACTIVE)):!1;if(b)return{state:"active"};b=a==null?void 0:a.lastActiveTimestampMs;return b!=null&&d("MWPThreadHasActiveUserUtils").isMsTimestampWithinPastDay(b)?{lastActiveTimestampMs:b,state:"recently_active"}:{state:"inactive"}}function a(a){var b=a.inactiveSnippet;a=a.presenceState;a=m(a);switch(a.state){case"active":return h._("__JHASH__8hpTChzyNvb__JHASH__");case"recently_active":return h._("__JHASH__yVUdYKgAiR3__JHASH__",[h._param("time",l.jsx(c("CometRelativeTimestamp.react"),{date:new Date((j||(j=d("I64"))).to_float(a.lastActiveTimestampMs)),format:"minimized"}))]);default:return b}}a.displayName=a.name+" [from "+f.id+"]";g.getCanonicalPresenceData=m;g.IGDPresenceTextForCanonicalThread=a}),226);
__d("IGDPresenceTextForGroupThread.react",["fbt","I64","LSIntEnum","LSPresenceStatus","MWPThreadHasActiveUserUtils","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=(j||(j=d("react"))).unstable_useMemoCache,n=j;function o(a){var b=[],e=0;for(var a=a,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;var i=h[0];h=h[1];var j=h.lastActiveTimestampMs,m=!d("MWPThreadHasActiveUserUtils").isMsTimestampNotExpired(h.expirationTimestampMs);if(m)continue;m=(k||(k=d("I64"))).equal(h.status,(l||(l=d("LSIntEnum"))).ofNumber(c("LSPresenceStatus").ACTIVE));h=j!=null?d("MWPThreadHasActiveUserUtils").isMsTimestampWithinPastDay(j):!1;m&&b.push(i);h&&(e+=1)}if(b.length===1){j=b[0];return{participant:j,state:"single_active_user"}}else if(b.length!==0)return{count:b.length,state:"active_users"};else if(e>0)return{count:e,state:"recently_active"};else return{state:"inactive"}}function p(a){var b=m(8);a=a.participant;var e=(i||(i=c("useReStore")))(),g=a.contactId;b[0]!==e.tables.contacts||b[1]!==g?(a=function(){return d("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(g)},b[0]=e.tables.contacts,b[1]=g,b[2]=a):a=b[2];var j;b[3]!==e||b[4]!==g?(j=[e,g],b[3]=e,b[4]=g,b[5]=j):j=b[5];a=d("ReQLSuspense").useFirst(a,j,f.id+":109");if(a!=null){j=a.secondaryName;j=j!=null?j:a.name}else j=null;if(j==null)return null;b[6]!==j?(a=h._("__JHASH__lZmgB-Ll2vc__JHASH__",[h._param("username",j)]),b[6]=j,b[7]=a):a=b[7];return a}function a(a){var b=m(8);a=a.presenceStates;var c;b[0]!==a?(c=o(a),b[0]=a,b[1]=c):c=b[1];a=c;switch(a.state){case"single_active_user":b[2]!==a.participant?(c=n.jsx(p,{participant:a.participant}),b[2]=a.participant,b[3]=c):c=b[3];return c;case"active_users":b[4]!==a.count?(c=h._("__JHASH__nyD2lTMkH7-__JHASH__",[h._param("count",String(a.count))]),b[4]=a.count,b[5]=c):c=b[5];return c;case"recently_active":b[6]!==a.count?(c=h._("__JHASH__VHWQfDmCIfu__JHASH__",[h._param("count",String(a.count))]),b[6]=a.count,b[7]=c):c=b[7];return c;default:return null}}g.getGroupPresenceData=o;g.IGDPresenceTextForGroupThread=a}),226);
__d("IGDPresenceTextForThread.react",["IGDPresenceTextForCanonicalThread","IGDPresenceTextForGroupThread.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(4);a=a.presenceState;if(a.threadType==="canonical"){var c;b[0]!==a.state?(c=j.jsx(d("IGDPresenceTextForCanonicalThread").IGDPresenceTextForCanonicalThread,{presenceState:a.state}),b[0]=a.state,b[1]=c):c=b[1];return c}else{b[2]!==a.state?(c=j.jsx(d("IGDPresenceTextForGroupThread.react").IGDPresenceTextForGroupThread,{presenceStates:a.state}),b[2]=a.state,b[3]=c):c=b[3];return c}}g["default"]=a}),98);
__d("IGDVisibilityAware.react",["clearTimeout","intersectionObserverEntryIsIntersecting","mergeRefs","react","setTimeout","useIntersectionObserver","useResizeObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useEffect,l=b.useRef,m=b.useState,n=i.unstable_Activity;function a(a){var b=a.children,d=a.root;d=d===void 0?null:d;var e=a.rootMargin;a=a.threshold;a=a===void 0?0:a;var f=m(!0),g=f[0],h=f[1];f=m(!1);var k=f[0],p=f[1],q=o();f=j(function(a){a=c("intersectionObserverEntryIsIntersecting")(a);h(a);a?q("immediate",function(){p(!1)}):q("idle",function(){p(!0)})},[q]);f=c("useIntersectionObserver")(f,{root:d,rootMargin:e,threshold:a});var r=l();d=j(function(a){g&&(r.current=a.height)},[g]);e=c("useResizeObserver")(d);a=c("mergeRefs")(f,e);return i.jsx("div",{className:"x13dflua x19991ni",ref:a,style:{height:!g&&r.current!=null?r.current+"px":void 0,opacity:g?1:0},children:k?null:i.jsx(n,{mode:g?"visible":"hidden",children:b})})}a.displayName=a.name+" [from "+f.id+"]";function o(){var a=l(null),b=l(null),d=j(function(){a.current!=null&&(c("clearTimeout")(a.current),a.current=null),b.current!=null&&(window.cancelIdleCallback&&window.cancelIdleCallback(b.current),b.current=null)},[]);k(function(){return d},[d]);return j(function(e,f){d(),e==="idle"?a.current=c("setTimeout")(function(){window.requestIdleCallback?b.current=window.requestIdleCallback(f):f()},1e3):f()},[d])}g["default"]=a}),98);
__d("useMWPPresenceStatesForThread",["I64","LSIntEnum","MAWContactRelationshipType","MWPActor.react","ReQL","ReQLSuspense","WADbContact","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useMemo;function m(a){if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(1)))return!0;else return(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(15))}function n(a){if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(2)))return!0;else return(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(16))}function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=d("ReQLSuspense").useFirst(function(){return m(a.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(b.tables.presence_states)).filter(function(a){a[0];a=a[1];return!(j||(j=d("I64"))).equal(a.contactId,e)}):d("ReQL").empty()},[e,b,a.threadKey,a.threadType],f.id+":73"),i=d("ReQLSuspense").useFirst(function(){return g!=null?d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(g[0].contactId):d("ReQL").empty()},[b,g],f.id+":86"),k=g!=null&&i!=null&&d("MAWContactRelationshipType").getContactRelationshipType(i)!==d("WADbContact").ONE_WAY_CONTACT?g[1]:void 0,o=d("ReQLSuspense").useArray(function(){return n(a.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(b.tables.presence_states)).filter(function(a){a[0];a=a[1];return!(j||(j=d("I64"))).equal(a.contactId,e)}):d("ReQL").empty()},[b,a.threadKey,e,a.threadType],f.id+":100");return l(function(){return m(a.threadType)?{state:k,threadType:"canonical"}:{state:o,threadType:"group"}},[k,o,a.threadType])}g["default"]=a}),98);
__d("useMWPThreadHasActiveUser",["I64","MWPThreadHasActiveUserUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useMemo;function a(a){return j(function(){if(a.threadType!=="canonical")return a.state.some(function(a){a[0];a=a[1];if(d("MWPThreadHasActiveUserUtils").isMsTimestampNotExpired(a.expirationTimestampMs))return(i||(i=d("I64"))).equal(a.status,i.of_string("2"));else return!1});var b=a.state;if(b!=null&&d("MWPThreadHasActiveUserUtils").isMsTimestampNotExpired(b.expirationTimestampMs))return(i||(i=d("I64"))).equal(b.status,i.of_string("2"));else return!1},[a])}g["default"]=a}),98);
__d("useMaybeAddE2EEAnnotations",["I64","IGDRouteProvider.react","InteractionTracing","LSIntEnum","LSMessagingThreadTypeUtil","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useEffect,l=b.unstable_useMemoCache;function a(){var a=l(11),b=d("IGDRouteProvider.react").useThreadKeyFromCurrentRoute(),e=d("IGDRouteProvider.react").useThreadTypeFromCurrentRoute(),f;a[0]!==b?(f=b!=null?(i||(i=d("I64"))).to_string(b):null,a[0]=b,a[1]=f):f=a[1];var g=f;a[2]!==e?(b=e!=null?(j||(j=d("LSIntEnum"))).toNumber(e):0,a[2]=e,a[3]=b):b=a[3];var h=b;a[4]!==e?(f=e!=null?d("LSMessagingThreadTypeUtil").isArmadilloSecure(e):!1,a[4]=e,a[5]=f):f=a[5];var m=f;a[6]!==g||a[7]!==h||a[8]!==m?(b=function(){c("InteractionTracing").getPendingInteractions().forEach(function(a){if(g==null){a.addAnnotationInt("rendered_direct_null_state",1);a.addAnnotationInt("has_thread_key",0);return}a.addAnnotationInt("has_thread_key",1);a.addAnnotation("thread_id",g);a.addAnnotationInt("thread_type",h);a.addAnnotationBoolean("is_secure",m)})},e=[m,g,h],a[6]=g,a[7]=h,a[8]=m,a[9]=b,a[10]=e):(b=a[9],e=a[10]);k(b,e)}g["default"]=a}),98);